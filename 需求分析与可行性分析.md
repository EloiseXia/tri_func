## 1 需求分析

### 1.1 功能需求

​	在程序设计中，通过设计、编制、调试一个三角函数计算器的程序，加深对软件工程的应用及实践。

​	计算器是日常生活中十分便捷有效的工具，能实现加、减、乘、除等简单运算功能。而三角函数计算器，功能相较于普通计算器而言功能更强大，可以实现sin cos arcsin arctan等函数计算功能。

### 1.2 功能分析

#### 1.2.1普通窗口计算设计

​		这一模块要求进行加减乘除运算。

​	（1）支持十进制数字的输入、计算。当按下等号键时直接给出当前算式的运算结果，算式计算和编辑可同时交叉进行。

​	（2）清零操作。当按下清零按钮时，当前算式清零。

​	（3）回退操作。按下一格回退键，回退一次输入的数据。方便用户在使用时对误操作进行修正。

​	（4）包含括号，方便一次操作进行多项计算。

​	（5）包含小数点，以便进行包含小数的数据输入。

#### 1.2.2三角函数窗口计算设计

​	（1）这一模块包含sin、cos、arcsin、arctan的输入。

​	（2）三角函数可以设置角度和弧度两种模式。

​	（3）三角函数窗口应和普通窗口兼容。

## 2 可行性分析

### 2.1 接口分析

​		由于本计算器只针对十进制进行操作，所以输入的数据只包含数字、小数点、加减乘除、sin、cos、arcsin、arctan。

​		程序中设计的输入数据应为双精度浮点类型，其位数为64位，负值取值范围约为-1.7977E+308到-4.9407E-324；正值取值范围约为4.9407E-324到1.7977E+308。当输入或计算的值超过这个范围时，都应该进行报错处理。

​		当输入的表达式不符合规范时，应提示用户，并进行报错处理。

### 2.2 算法分析

​		另外由于题目要求不能调库，需要自己写三角函数。可以考虑从多项式入手，对三角函数进行近似化处理，麦克劳林公式就是一个很好的选择。由《高等数学》可知，
$$
sinx=x-\frac{1}{3!}\times x^3 + \frac{1}{5!}\times x^5 +...+(-1)^{m-1}\times \frac{1}{(2m-1)!}\times x^{2m-1} + R_{2m}(x)
$$
由于该程序是简易计算器，实际编程中可以将尾项去掉，并将m的值设置为合适大小即可实现。

​		同样可得cosx, arcsinx , arctanx的麦克劳林展开式。
$$
cosx = 1 -\frac{1}{2!}\times x^2 + \frac{1}{4!}\times x^4 +...+(-1)^{m}\times \frac{1}{2m!}\times x^{2m} + R_{2m+1}(x)
$$

$$
arcsinx = x + \frac{1}{6}\times x^3 + \frac{3}{40}\times x^5 +...+\times \frac{(2m)!}{4^m(m!)^2(2m+1)}\times x^{2m+1} + R_{2m+2}(x)
$$

​		
$$
arctanx = x-\frac{1}{3}\times x^3 + \frac{1}{5}\times x^5 +...+(-1)^{m-1}\times \frac{1}{2m-1}\times x^{2m-1} + R_{2m}(x)
$$
​		需注意的是，由于麦克劳林展开式是在
$$
x_0 = 0
$$
附近的展开值，实际编程中应该将x进行取余处理。

### 2.3 界面分析

​		由于题目没有对平台的可移植性作要求，从开发的便捷性考量，可选取Visual Studio 2012平台进行界面开发。选取这一平台的优点是：Visual Studio 2012平台可以加载MFC向导实现应用程序框架的搭建。不同于在空项目中自定义界面宽、长，按钮的位置等复杂操作，MFC可以使用对话框实现界面的设计，且界面是可视化的。在设计好界面后，只需要添加相应的类、变量等，即可实现其对应。



